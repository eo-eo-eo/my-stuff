local function createButton(text)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(buttonWidth, 0, buttonHeight, 0)
    button.Text = text
    button.Parent = Frame
    button.TextButton.Text = text  -- Update the TextButton text to the specified text
    button.TextButton.AutoButtonColor = false  -- Ensure button color doesn't change on click
    return button
end

-- Create the "Disable tower duping" button and initialize it as disabled
local ToggleButton = createButton("Enable tower duping")
ToggleButton.TextButton.BackgroundColor3 = Color3.fromRGB(128, 128, 128)  -- Gray color to indicate it's disabled
ToggleButton.TextButton.TextColor3 = Color3.fromRGB(255, 255, 255)  -- White text
ToggleButton.TextButton.TextButton = false  -- Disable the button

-- Add the functionality for toggling the button
ToggleButton.MouseButton1Click:Connect(function()
    local monsterId = getMonsterId(TextBox.Text)
    if monsterId then
        loopEnabled = not loopEnabled
        if loopEnabled then
            ToggleButton.TextButton.Text = "Disable tower duping"
            ToggleButton.TextButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)  -- Green color when enabled
            ToggleButton.TextButton.TextColor3 = Color3.fromRGB(0, 0, 0)  -- Black text when enabled
            coroutine.wrap(function()
                runLoop(monsterId)
            end)()
        else
            ToggleButton.TextButton.Text = "Enable tower duping"
            ToggleButton.TextButton.BackgroundColor3 = Color3.fromRGB(128, 128, 128)  -- Gray color when disabled
            ToggleButton.TextButton.TextColor3 = Color3.fromRGB(255, 255, 255)  -- White text when disabled
        end
    end
end)
