local HttpService = game:GetService("HttpService")

local screenGui = Instance.new("ScreenGui")
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local textBox = Instance.new("TextBox")
textBox.Size = UDim2.new(0, 200, 0, 50)
textBox.Position = UDim2.new(0.5, -100, 0.4, 0)
textBox.PlaceholderText = "Enter key"
textBox.Parent = screenGui

local enterButton = Instance.new("TextButton")
enterButton.Size = UDim2.new(0, 100, 0, 50)
enterButton.Position = UDim2.new(0.5, -50, 0.5, 0)
enterButton.Text = "Enter Key"
enterButton.Parent = screenGui

local googleAppUrl = "https://script.google.com/macros/s/AKfycbxmbCmfkiVWlQTxZTO6DDOnRPIxnGimY9db5PVxq_ahyVYsxTfQ-dwUI-wuYCWlTHsj/exec"

local function validateKey(inputKey)
    local data = {
        key = inputKey,
        playerId = game.Players.LocalPlayer.UserId
    }
    
    local success, response = pcall(function()
        return HttpService:PostAsync(googleAppUrl, HttpService:JSONEncode(data), Enum.HttpContentType.ApplicationJson)
    end)
    
    if success then
        local decodedResponse = HttpService:JSONDecode(response)
        return decodedResponse.valid
    else
        warn("Error in HTTP request: " .. response)
        return false
    end
end

local function destroyAllButtons()
    for _, guiObject in pairs(screenGui:GetChildren()) do
        guiObject:Destroy()
    end
end

local function createNewButtons()
    local newButton1 = Instance.new("TextButton")
    newButton1.Size = UDim2.new(0, 200, 0, 50)
    newButton1.Position = UDim2.new(0.5, -250, 0.6, 0)
    newButton1.Text = "UTTD GUI for Fast Device"
    newButton1.Parent = screenGui

    local newButton2 = Instance.new("TextButton")
    newButton2.Size = UDim2.new(0, 200, 0, 50)
    newButton2.Position = UDim2.new(0.5, 50, 0.6, 0)
    newButton2.Text = "UTTD GUI for Slow Device"
    newButton2.Parent = screenGui

    newButton1.MouseButton1Click:Connect(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/eo-eo-eo/my-stuff/main/other%20thingy%20for%20fast%20device", true))()
        destroyAllButtons()
    end)

    newButton2.MouseButton1Click:Connect(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/eo-eo-eo/my-stuff/main/other%20thingy%20for%20slow%20device", true))()
        destroyAllButtons()
    end)
end

enterButton.MouseButton1Click:Connect(function()
    local enteredText = textBox.Text
    local isValid = validateKey(enteredText)
    
    if isValid then
        textBox:Destroy()
        enterButton:Destroy()
        createNewButtons()
    else
        print("Redemption failed or invalid key.")
    end
end)
